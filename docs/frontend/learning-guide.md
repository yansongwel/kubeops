# KubeOps å‰ç«¯å¼€å‘å­¦ä¹ æŒ‡å—

> æœ¬æŒ‡å—é¢å‘å¸Œæœ›æå‡å…¨æ ˆå¼€å‘èƒ½åŠ›çš„è¿ç»´å·¥ç¨‹å¸ˆ

## å­¦ä¹ ç›®æ ‡

é€šè¿‡ KubeOps é¡¹ç›®ï¼Œæ‚¨å°†æŒæ¡ï¼š

### å‰ç«¯æŠ€èƒ½
- âœ… Vue 3 Composition APIï¼ˆç°ä»£åŒ–å¼€å‘èŒƒå¼ï¼‰
- âœ… TypeScriptï¼ˆç±»å‹å®‰å…¨ï¼‰
- âœ… å‰ç«¯å·¥ç¨‹åŒ–ï¼ˆViteã€æ„å»ºä¼˜åŒ–ï¼‰
- âœ… çŠ¶æ€ç®¡ç†ï¼ˆPiniaï¼‰
- âœ… ç»„ä»¶åŒ–å¼€å‘æ€ç»´
- âœ… å‰åç«¯è”è°ƒç»éªŒ

### åç«¯æŠ€èƒ½
- âœ… Go è¯­è¨€ï¼ˆäº‘åŸç”Ÿå¼€å‘ï¼‰
- âœ… å¾®æœåŠ¡æ¶æ„è®¾è®¡
- âœ… RESTful API è®¾è®¡
- âœ… gRPC é€šä¿¡
- âœ… æ•°æ®åº“è®¾è®¡
- âœ… Kubernetes ç¼–ç¨‹

### æ¶æ„èƒ½åŠ›
- âœ… å‰åç«¯åˆ†ç¦»æ¶æ„
- âœ… å¾®æœåŠ¡æ‹†åˆ†åŸåˆ™
- âœ… API è®¾è®¡è§„èŒƒ
- âœ… æ•°æ®æµå‘è®¾è®¡
- âœ… å®‰å…¨æ¶æ„
- âœ… æ€§èƒ½ä¼˜åŒ–

## å­¦ä¹ è·¯å¾„

### é˜¶æ®µä¸€ï¼šå‰ç«¯åŸºç¡€ï¼ˆ2-3 å‘¨ï¼‰

#### Week 1: Vue 3 åŸºç¡€
```bash
# å­¦ä¹ èµ„æº
- Vue 3 å®˜æ–¹æ–‡æ¡£: https://cn.vuejs.org/
- TypeScript: https://www.typescriptlang.org/zh/docs/
- Vite: https://cn.vitejs.dev/

# å®è·µä»»åŠ¡
1. å®Œæˆç™»å½•é¡µé¢
2. å®ç°ä¸»å¸ƒå±€
3. åˆ›å»ºè·¯ç”±é…ç½®
```

#### Week 2: ç»„ä»¶å¼€å‘
```bash
# å­¦ä¹ é‡ç‚¹
- ç»„ä»¶é€šä¿¡ï¼ˆpropsã€emitã€provide/injectï¼‰
- ç”Ÿå‘½å‘¨æœŸ
- ç»„åˆå¼å‡½æ•°
- TypeScript ç±»å‹å®šä¹‰

# å®è·µä»»åŠ¡
1. å¼€å‘è¡¨æ ¼ç»„ä»¶ï¼ˆPod åˆ—è¡¨ï¼‰
2. å¼€å‘è¡¨å•ç»„ä»¶ï¼ˆåˆ›å»º Deploymentï¼‰
3. å¼€å‘è¯¦æƒ…ç»„ä»¶ï¼ˆYAML ç¼–è¾‘å™¨ï¼‰
```

#### Week 3: çŠ¶æ€ç®¡ç†
```bash
# å­¦ä¹ é‡ç‚¹
- Pinia Store
- API å°è£…
- é”™è¯¯å¤„ç†
- Loading çŠ¶æ€

# å®è·µä»»åŠ¡
1. é›†æˆ Pinia
2. å°è£… API è¯·æ±‚
3. å®ç°å…¨å±€çŠ¶æ€ç®¡ç†
```

### é˜¶æ®µäºŒï¼šåç«¯å¼€å‘ï¼ˆ3-4 å‘¨ï¼‰

#### Week 1-2: Go åŸºç¡€
```bash
# å­¦ä¹ èµ„æº
- Go è¯­è¨€åœ£ç»: https://gopl-zh.github.io/
- Go by Example: https://gobyexample.com/
- Kubernetes client-go: https://github.com/kubernetes/client-go

# å®è·µä»»åŠ¡
1. å®ç° API ç½‘å…³åŸºç¡€æ¡†æ¶
2. å®ç° Kube Manager æ ¸å¿ƒ API
3. å®ç°ä¸­é—´ä»¶ï¼ˆè®¤è¯ã€æ—¥å¿—ã€é™æµï¼‰
```

#### Week 3-4: å¾®æœåŠ¡æ¶æ„
```bash
# å­¦ä¹ é‡ç‚¹
- å¾®æœåŠ¡æ‹†åˆ†åŸåˆ™
- æœåŠ¡é—´é€šä¿¡ï¼ˆgRPCï¼‰
- æ•°æ®åº“è®¾è®¡
- ç¼“å­˜ç­–ç•¥
- é”™è¯¯å¤„ç†å’Œé‡è¯•

# å®è·µä»»åŠ¡
1. å®ç° AI å·¡æ£€æœåŠ¡
2. å®ç° DevOps æœåŠ¡
3. å®ç°æ—¥å¿—å’Œç›‘æ§æœåŠ¡
```

### é˜¶æ®µä¸‰ï¼šå‰åç«¯è”è°ƒï¼ˆ2 å‘¨ï¼‰

#### Week 1: API å¯¹æ¥
```bash
# å®è·µä»»åŠ¡
1. å®šä¹‰ API æ¥å£è§„èŒƒ
2. å‰ç«¯å°è£… API
3. åç«¯å®ç°æ¥å£
4. è”è°ƒæµ‹è¯•
```

#### Week 2: åŠŸèƒ½å®Œå–„
```bash
# å®è·µä»»åŠ¡
1. é›†ç¾¤ç®¡ç†åŠŸèƒ½
2. å·¥ä½œè´Ÿè½½ç®¡ç†
3. å®æ—¶æ—¥å¿—æŸ¥çœ‹
4. æƒé™ç®¡ç†
```

### é˜¶æ®µå››ï¼šé«˜çº§ç‰¹æ€§ï¼ˆ4 å‘¨ï¼‰

#### Week 1-2: å®æ—¶é€šä¿¡
```bash
# å­¦ä¹ é‡ç‚¹
- WebSocket
- Server-Sent Events
- å®æ—¶æ—¥å¿—æµ
- å®æ—¶æŒ‡æ ‡æ›´æ–°
```

#### Week 3-4: æ€§èƒ½ä¼˜åŒ–
```bash
# å­¦ä¹ é‡ç‚¹
- å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼ˆæ‡’åŠ è½½ã€è™šæ‹Ÿæ»šåŠ¨ï¼‰
- åç«¯æ€§èƒ½ä¼˜åŒ–ï¼ˆç¼“å­˜ã€è¿æ¥æ± ï¼‰
- æ•°æ®åº“ä¼˜åŒ–
- ç›‘æ§å’Œè°ƒè¯•
```

## æ ¸å¿ƒæ¨¡å—å®ç°é¡ºåº

### 1. ç”¨æˆ·è®¤è¯æ¨¡å— â­â­â­

**å­¦ä¹ é‡ç‚¹**ï¼š
- JWT Token æœºåˆ¶
- å‰ç«¯è·¯ç”±å®ˆå«
- åç«¯ä¸­é—´ä»¶
- ä¼šè¯ç®¡ç†

**å®ç°æ­¥éª¤**ï¼š
```bash
# å‰ç«¯
1. ç™»å½•é¡µé¢ UI
2. Token å­˜å‚¨å’Œåˆ·æ–°
3. è·¯ç”±å®ˆå«
4. Axios è¯·æ±‚æ‹¦æˆªå™¨

# åç«¯
1. JWT ç”Ÿæˆå’ŒéªŒè¯
2. ç”¨æˆ·è®¤è¯æ¥å£
3. æƒé™ä¸­é—´ä»¶
4. ä¼šè¯ç®¡ç†
```

**ä»£ç ç¤ºä¾‹**ï¼š
```typescript
// å‰ç«¯ï¼šsrc/api/auth.ts
export async function login(username: string, password: string) {
  const { data } = await axios.post('/api/v1/auth/login', {
    username,
    password,
  });
  localStorage.setItem('token', data.token);
  return data;
}

// è·¯ç”±å®ˆå«
router.beforeEach((to, from, next) => {
  const token = localStorage.getItem('token');
  if (!token && to.path !== '/login') {
    next('/login');
  } else {
    next();
  }
});
```

```go
// åç«¯ï¼šjwt.go
func GenerateToken(userID string) (string, error) {
    token := jwt.NewWithClaims(jwt.SigningMethodHS256, jwt.MapClaims{
        "user_id": userID,
        "exp":     time.Now().Add(time.Hour * 24).Unix(),
    })
    return token.SignedString([]byte("secret"))
}
```

### 2. é›†ç¾¤ç®¡ç†æ¨¡å— â­â­â­â­â­

**å­¦ä¹ é‡ç‚¹**ï¼š
- CRUD æ“ä½œ
- è¡¨æ ¼ç»„ä»¶
- è¯¦æƒ…é¡µ
- YAML ç¼–è¾‘å™¨

**å®ç°æ­¥éª¤**ï¼š
```bash
1. é›†ç¾¤åˆ—è¡¨é¡µï¼ˆè¡¨æ ¼ï¼‰
2. åˆ›å»ºé›†ç¾¤å¯¹è¯æ¡†
3. é›†ç¾¤è¯¦æƒ…é¡µ
4. èµ„æº YAML ç¼–è¾‘å™¨
```

**æ ¸å¿ƒä»£ç ç»“æ„**ï¼š
```typescript
// src/views/kube/clusters/index.vue
<template>
  <div class="clusters-page">
    <!-- å·¥å…·æ  -->
    <el-button type="primary" @click="handleCreate">
      åˆ›å»ºé›†ç¾¤
    </el-button>

    <!-- é›†ç¾¤åˆ—è¡¨ -->
    <el-table :data="clusters" v-loading="loading">
      <el-table-column prop="name" label="é›†ç¾¤åç§°" />
      <el-table-column prop="version" label="ç‰ˆæœ¬" />
      <el-table-column prop="nodeCount" label="èŠ‚ç‚¹æ•°" />
      <el-table-column label="æ“ä½œ">
        <template #default="{ row }">
          <el-button @click="handleView(row)">æŸ¥çœ‹</el-button>
          <el-button @click="handleDelete(row)">åˆ é™¤</el-button>
        </template>
      </el-table-column>
    </el-table>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue';
import { listClusters, deleteCluster } from '@/api/kube/clusters';

const clusters = ref([]);
const loading = ref(false);

const loadClusters = async () => {
  loading.value = true;
  clusters.value = await listClusters();
  loading.value = false;
};

onMounted(() => {
  loadClusters();
});
</script>
```

### 3. å·¥ä½œè´Ÿè½½æ¨¡å— â­â­â­â­â­

**å­¦ä¹ é‡ç‚¹**ï¼š
- å¤æ‚è¡¨æ ¼ï¼ˆå±•å¼€è¡Œã€åµŒå¥—è¡¨æ ¼ï¼‰
- Tab åˆ‡æ¢
- å®æ—¶çŠ¶æ€æ›´æ–°
- æ“ä½œç¡®è®¤

**å®ç°æ­¥éª¤**ï¼š
```bash
1. Pod åˆ—è¡¨ï¼ˆå¸¦å±•å¼€è¡Œæ˜¾ç¤ºå®¹å™¨ä¿¡æ¯ï¼‰
2. Deployment åˆ—è¡¨ï¼ˆå‰¯æœ¬æ•°ã€æ›´æ–°ç­–ç•¥ï¼‰
3. Service åˆ—è¡¨ï¼ˆç«¯ç‚¹ã€ç«¯å£æ˜ å°„ï¼‰
4. StatefulSet/DaemonSet
```

### 4. YAML ç¼–è¾‘å™¨ â­â­â­â­

**å­¦ä¹ é‡ç‚¹**ï¼š
- ä»£ç ç¼–è¾‘å™¨é›†æˆï¼ˆMonaco Editorï¼‰
- è¯­æ³•é«˜äº®
- æ ¼å¼åŒ–
- éªŒè¯

**å®ç°æ–¹æ¡ˆ**ï¼š
```typescript
// å®‰è£… Monaco Editor
npm install monaco-editor @monaco-editor/loader

// src/components/YamlEditor.vue
<template>
  <div class="yaml-editor" ref="editorContainer"></div>
</template>

<script setup lang="ts">
import { ref, onMounted, onUnmounted } from 'vue';
import * as monaco from 'monaco-editor';

const editorContainer = ref<HTMLElement>();
let editor: monaco.editor.IStandaloneCodeEditor;

onMounted(() => {
  editor = monaco.editor.create(editorContainer.value!, {
    value: '# YAML å†…å®¹',
    language: 'yaml',
    theme: 'vs-dark',
    minimap: { enabled: false },
  });
});

onUnmounted(() => {
  editor?.dispose();
});
</script>
```

### 5. å®æ—¶æ—¥å¿—æ¨¡å— â­â­â­â­â­

**å­¦ä¹ é‡ç‚¹**ï¼š
- WebSocket è¿æ¥
- æ—¥å¿—æµå¼æ˜¾ç¤º
- è‡ªåŠ¨æ»šåŠ¨
- å…³é”®å­—æœç´¢

**å®ç°æ–¹æ¡ˆ**ï¼š
```typescript
// src/composables/useWebSocket.ts
export function useWebSocket(url: string) {
  const ws = ref<WebSocket | null>(null);
  const data = ref<any[]>([]);
  const connected = ref(false);

  const connect = () => {
    ws.value = new WebSocket(url);
    ws.value.onopen = () => {
      connected.value = true;
    };
    ws.value.onmessage = (event) => {
      data.value.push(JSON.parse(event.data));
    };
    ws.value.onclose = () => {
      connected.value = false;
    };
  };

  const disconnect = () => {
    ws.value?.close();
  };

  return { connect, disconnect, data, connected };
}

// ä½¿ç”¨
const { connect, data, connected } = useWebSocket('ws://localhost:8080/logs');
connect();
```

## ç¼–ç¨‹æ€ç»´æå‡

### 1. åˆ†å±‚æ€ç»´

```
å‰ç«¯åˆ†å±‚ï¼š
â”œâ”€â”€ è§†å›¾å±‚
â”œâ”€â”€ é€»è¾‘å±‚
â”‚   â”œâ”€â”€ API å±‚
â”‚   â”œâ”€â”€ Store å±‚
â”‚   â””â”€â”€ ä¸šåŠ¡å±‚
â””â”€â”€ ç»„ä»¶å±‚

åç«¯åˆ†å±‚ï¼š
â”œâ”€â”€ æ¥å£å±‚
â”œâ”€â”€ ä¸šåŠ¡å±‚
â”‚   â”œâ”€â”€ Service
â”‚   â””â”€â”€ Domain
â”œâ”€â”€ æ•°æ®å±‚
â”‚   â”œâ”€â”€ Repository
â”‚   â””â”€â”€ Model
â””â”€â”€ åŸºç¡€è®¾æ–½å±‚
```

### 2. æ¨¡å—åŒ–æ€ç»´

**å¦‚ä½•æ‹†åˆ†æ¨¡å—**ï¼š
- æŒ‰ä¸šåŠ¡åŠŸèƒ½æ‹†åˆ†ï¼ˆé›†ç¾¤ã€å·¥ä½œè´Ÿè½½ã€AIï¼‰
- æŒ‰æŠ€æœ¯å±‚æ¬¡æ‹†åˆ†ï¼ˆAPIã€Storeã€ç»„ä»¶ï¼‰
- å•ä¸€èŒè´£åŸåˆ™
- ä¾èµ–å€’ç½®

### 3. æ•°æ®æµæ€ç»´

```
ç”¨æˆ·æ“ä½œ â†’ ç»„ä»¶äº‹ä»¶ â†’ Store Action â†’ API è¯·æ±‚
  â†“
åç«¯å¤„ç† â†’ æ•°æ®åº“/K8s API â†’ è¿”å›ç»“æœ
  â†“
Store Mutation â†’ ç»„ä»¶å“åº”å¼æ›´æ–° â†’ UI æ¸²æŸ“
```

### 4. é”™è¯¯å¤„ç†æ€ç»´

```typescript
// ç»Ÿä¸€é”™è¯¯å¤„ç†
class ApiError extends Error {
  constructor(
    public code: number,
    message: string,
    public details?: any
  ) {
    super(message);
  }
}

// ä½¿ç”¨
try {
  await createCluster(data);
} catch (error) {
  if (error instanceof ApiError) {
    handleError(error);
  }
}
```

## å®è·µå»ºè®®

### 1. å°æ­¥å¿«è·‘
- ä¸è¦ä¸€æ¬¡å®ç°æ‰€æœ‰åŠŸèƒ½
- æ¯ä¸ªåŠŸèƒ½ç‚¹ç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•
- åŠæ—¶æäº¤ä»£ç 

### 2. å†™æµ‹è¯•
- å•å…ƒæµ‹è¯•
- ç»„ä»¶æµ‹è¯•
- API æµ‹è¯•

### 3. ä»£ç å®¡æŸ¥
- è‡ªå·± review ä»£ç 
- å­¦ä¹ ä¼˜ç§€å¼€æºé¡¹ç›®
- å…³æ³¨ä»£ç è´¨é‡

### 4. è®°å½•å­¦ä¹ 
- å†™æŠ€æœ¯åšå®¢
- è®°å½•è¸©å‘ç»éªŒ
- æ€»ç»“æœ€ä½³å®è·µ

## å­¦ä¹ èµ„æºæ¨è

### Vue 3
- [Vue 3 å®˜æ–¹æ–‡æ¡£](https://cn.vuejs.org/)
- [Vue Mastery](https://www.vuemastery.com/)
- [Composition API RFC](https://github.com/vuejs/rfcs)

### Go
- [Go è¯­è¨€åœ£ç»](https://gopl-zh.github.io/)
- [Go by Example](https://gobyexample.com/)
- [Effective Go](https://go.dev/doc/effective_go)

### Kubernetes
- [Kubernetes å®˜æ–¹æ–‡æ¡£](https://kubernetes.io/zh-cn/docs/)
- [client-go ç¤ºä¾‹](https://github.com/kubernetes/client-go/tree/master/examples)
- [controller-runtime](https://github.com/kubernetes-sigs/controller-runtime)

### æ¶æ„è®¾è®¡
- [ã€Šæ¶æ„æ•´æ´ä¹‹é“ã€‹](https://book.douban.com/subject/27022909/)
- [ã€Šå¾®æœåŠ¡æ¶æ„è®¾è®¡æ¨¡å¼ã€‹](https://book.douban.com/subject/30356827/)
- [ã€Šå‡¤å‡°é¡¹ç›®ã€‹](https://book.douban.com/subject/25779198/)

## é¡¹ç›®æ£€æŸ¥ç‚¹

### ç¬¬ 1 ä¸ªæœˆ
- [ ] å‰ç«¯åŸºç¡€æ¡†æ¶æ­å»º
- [ ] ç™»å½•è®¤è¯åŠŸèƒ½
- [ ] é›†ç¾¤åˆ—è¡¨é¡µ
- [ ] åç«¯ API ç½‘å…³åŸºç¡€

### ç¬¬ 2 ä¸ªæœˆ
- [ ] å·¥ä½œè´Ÿè½½ç®¡ç†ï¼ˆPodã€Deploymentï¼‰
- [ ] YAML ç¼–è¾‘å™¨
- [ ] å®æ—¶æ—¥å¿—æŸ¥çœ‹
- [ ] åç«¯ Kube Manager å®Œå–„

### ç¬¬ 3 ä¸ªæœˆ
- [ ] AI å·¡æ£€åŸºç¡€åŠŸèƒ½
- [ ] DevOps é›†æˆï¼ˆJenkinsï¼‰
- [ ] ç›‘æ§å›¾è¡¨å±•ç¤º
- [ ] æ€§èƒ½ä¼˜åŒ–

### ç¬¬ 4 ä¸ªæœˆ
- [ ] å®Œæ•´åŠŸèƒ½æµ‹è¯•
- [ ] æ–‡æ¡£å®Œå–„
- [ ] éƒ¨ç½²ä¼˜åŒ–
- [ ] å¼€æºå‘å¸ƒ

## æ€»ç»“

ä½œä¸ºé«˜çº§è¿ç»´å·¥ç¨‹å¸ˆï¼Œæ‚¨å·²ç»å…·å¤‡ï¼š
- âœ… Kubernetes ä¸“ä¸šçŸ¥è¯†
- âœ… ç³»ç»Ÿæ¶æ„ç†è§£
- âœ… è¿ç»´æœ€ä½³å®è·µ

é€šè¿‡ KubeOps é¡¹ç›®ï¼Œæ‚¨å°†è·å¾—ï¼š
- ğŸ¯ å…¨æ ˆå¼€å‘èƒ½åŠ›
- ğŸ¯ äº§å“æ€ç»´
- ğŸ¯ å·¥ç¨‹åŒ–èƒ½åŠ›
- ğŸ¯ æ¶æ„è®¾è®¡èƒ½åŠ›

è¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ é¡¹ç›®ï¼åŠ æ²¹ï¼ğŸ’ª
